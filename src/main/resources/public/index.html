<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Tic Tac Toe</title>
    <link rel="stylesheet" href="tictac.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    
</head>
<body>
    <h1>Tic Tac Toe</h1> 
    <table id="board" class="board">
            <tr>
                <td id="one" class="even" >
                    <button class="button" id="top-left" x="0" y="0" onclick="setValue(this.id)"></button>
                </td>
                <td id="two">
                    <button class="button" id="top-middle" x="0" y=1 onclick="setValue(this.id)"></button>
                </td>
                <td id="three" class="even">
                    <button class="button" id="top-right" x="0" y="2" onclick="setValue(this.id)"></button>
                </td>
            </tr>
            <tr>
                <td id="four">
                    <button class="button" id="mid-left" x="1" y="0" onclick="setValue(this.id)"></button>
                </td>
                <td id="five" class="even">
                    <button class="button" id="mid-mid" x="1" y="1" onclick="setValue(this.id)"></button>
                </td>
                <td id="six">
                    <button class="button" id="mid-right" x="1" y="2" onclick="setValue(this.id)"></button>
                </td>
            </tr>
            <tr>
                <td id="seven" class="even">
                    <button class="button" id="bot-left" x="2" y="0" onclick="setValue(this.id)"></button>
                </td>
                <td id="eight">
                    <button class="button" id="bot-mid" x="2" y="1" onclick="setValue(this.id)"></button>
                </td>
                <td id="nine" class="even">
                    <button class="button" id="bot-right" x="2" y="2" onclick="setValue(this.id)"></button>
                </td>
            </tr>
        </table>
  <script>
    var value = true;
    
    $(".button").on('click', function(e){
        document.getElementById(this.id).removeEventListener("click", setValue, false);

        var my_x = this.attributes.x.value;
        var my_y = this.attributes.y.value;
        var winner;

        $.post("/game", {
            x: my_x,
            y: my_y
        }).done(function(response){
            console.log(response);

        }).fail(function(response){
            console.log(response);
        })
    });

    function setValue(buttonID) {
        if(!document.getElementById(buttonID).classList.contains("clicked")){
            if(value){
                document.getElementById(buttonID).innerHTML = "X";
                value = false;
            }
            else{
                document.getElementById(buttonID).innerHTML = "O";
                value = true;
            }
            document.getElementById(buttonID).classList.add("clicked");
        }
    }
  </script>
</body>
</html>